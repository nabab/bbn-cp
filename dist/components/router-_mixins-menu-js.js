"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_bbn_bbn_cp"] = self["webpackChunk_bbn_bbn_cp"] || []).push([["components/router-_mixins-menu-js"],{

/***/ "./src/components/router/_mixins/menu.js":
/*!***********************************************!*\
  !*** ./src/components/router/_mixins/menu.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  props: {\n    /**\n     * @todo Integrates Boolean to have a default with no menu\n     * @prop {Array|Function} [[]] menu\n     */\n    menu: {\n      type: [Array, Function, Boolean],\n      default: function () {\n        return [];\n      }\n    }\n  },\n  methods: {\n    /**\n     * @method getMenuFn\n     * @param {Number} idx\n     * @fires getContainer\n     * @fires reload\n     * @return {Array|Boolean}\n     */\n    getMenuFn(idx) {\n      const view = bbn.fn.getRow(this.views, {\n        idx\n      });\n      if (!this.menu || !this.nav || !view || view.menu === false) {\n        bbn.fn.log(\"NO MENU\", idx, this.menu, this.nav, view, view?.menu);\n        return [];\n      }\n      let items = [];\n      let tmp = ((bbn.fn.isFunction(view.menu) ? view.menu() : view.menu) || []).slice();\n      let others = false;\n      let container = this.getContainer(idx);\n      bbn.fn.each(this.views, (a, i) => {\n        if (i !== idx && !a.fixed) {\n          others = true;\n          return false;\n        }\n      });\n      if (!view.help) {\n        let sub = this.urls[view.uid].subrouter;\n        if (sub && sub.views && sub.views.length) {\n          let helps = [];\n          sub.views.forEach(a => {\n            if (a.help) {\n              helps.push({\n                url: sub.fullBaseURL + a.url,\n                content: a.help,\n                label: a.label || a.url,\n                anchor: bbn.fn.randomString(15, 20).toLowerCase()\n              });\n            }\n          });\n          if (helps.length === 1) {\n            view.help = helps[0].content;\n          } else if (helps.length) {\n            view.help = '';\n            let slide1 = '';\n            helps.forEach(a => {\n              slide1 += '<h1><a href=\"#' + a.anchor + '\">' + a.label + '</a></h1>\\n';\n              view.help += '---slide---' + '\\n<a name=\"' + a.anchor + '\">\\n' + a.content;\n            });\n            view.help = slide1 + view.help;\n          }\n        }\n      }\n      if (view.help) {\n        items.push({\n          text: bbn._(\"Help\"),\n          key: \"help\",\n          icon: \"nf nf-md-help_circle_outline\",\n          action: () => {\n            let view = this.getContainer(idx),\n              span = document.createElement('span');\n            span.innerHTML = view.label;\n            let title = span.innerText;\n            if (!title && span.querySelector(\"[title]\").length) {\n              title = span.querySelector(\"[title]\").getAttribute(\"title\");\n            }\n            view.getPopup({\n              scrollable: false,\n              component: {\n                props: ['source'],\n                template: `\n                  <bbn-slideshow :source=\"source.content\"\n                                class=\"bbn-bg-webblue bbn-white\"\n                                :full-slide=\"true\"\n                                separator=\"---slide---\"></bbn-slideshow>`\n              },\n              source: {\n                content: view.help\n              },\n              label: '<i class=\"bbn-large nf nf-md-help_circle_outline\"> </i> <span class=\"bbn-iblock\">' + title + '</span>',\n              width: '90%',\n              height: '90%'\n            });\n          }\n        });\n      }\n      if (view.load && !view.component) {\n        items.push({\n          text: bbn._(\"Reload\"),\n          key: \"reload\",\n          icon: \"nf nf-md-sync\",\n          action: () => {\n            this.reload(idx);\n          }\n        });\n      }\n      if (container && container.fullScreen) {\n        items.push({\n          text: bbn._(\"Exit full screen\"),\n          key: \"reduce\",\n          icon: \"nf nf-md-arrow_collapse\",\n          action: () => {\n            container.fullScreen = false;\n          }\n        });\n      } else if (container && !container.isPane) {\n        items.push({\n          text: bbn._(\"Enlarge\"),\n          key: \"enlarge\",\n          icon: \"nf nf-md-arrow_expand_all\",\n          action: () => {\n            container.fullScreen = true;\n          }\n        });\n      }\n      if (tmp && tmp.length) {\n        bbn.fn.each(tmp, (a, i) => {\n          items.push(a);\n        });\n      }\n      if (view.icon && view.label && !this.isBreadcrumb && !this.isVisual) {\n        items.push({\n          text: view.notext ? bbn._(\"Show text\") : bbn._(\"Show only icon\"),\n          key: \"notext\",\n          icon: view.notext ? \"nf nf-fa-font\" : \"nf nf-fa-font_awesome\",\n          action: () => {\n            this.$set(view, 'notext', !view.notext);\n          }\n        });\n      }\n\n      // Adding a shortcut\n      if (window.appui) {\n        items.push({\n          text: bbn._(\"Create a shortcut\"),\n          key: \"shortcut\",\n          icon: \"nf nf-fa-link\",\n          action: () => {\n            this.$emit('shortcut', {\n              text: view.label,\n              icon: view.icon || 'nf nf-fa-link',\n              url: this.getFullBaseURL() + view.url\n            });\n          }\n        });\n      }\n      if (container) {\n        items.push({\n          text: bbn._(\"Copy content text\"),\n          icon: \"nf nf-fa-copy\",\n          key: \"text_copy\",\n          action: () => {\n            let scroll = container.getRef('scroll');\n            let ok = false;\n            if (scroll) {\n              let scrollContent = scroll.getRef('scrollContent');\n              if (scrollContent) {\n                bbn.fn.copy(scrollContent.innerText);\n                ok = true;\n              }\n            }\n            if (ok) {\n              appui.success(bbn._(\"Copied!\"));\n            } else {\n              appui.error(bbn._(\"Not copied!\"));\n            }\n          }\n        });\n        items.push({\n          text: bbn._(\"Copy content HTML\"),\n          icon: \"nf nf-fa-html5\",\n          key: \"html_copy\",\n          action: () => {\n            let scroll = container.getRef('scroll');\n            let ok = false;\n            if (scroll) {\n              let scrollContent = scroll.getRef('scrollContent');\n              if (scrollContent) {\n                bbn.fn.copy(scrollContent.innerHTML);\n                ok = true;\n              }\n            }\n            if (ok) {\n              appui.success(bbn._(\"Copied!\"));\n            } else {\n              appui.error(bbn._(\"Not copied!\"));\n            }\n          }\n        });\n        items.push({\n          text: bbn._(\"Screenshot\"),\n          icon: \"nf nf-md-image_album\",\n          key: \"screenshot\",\n          items: [{\n            text: bbn._(\"Download\"),\n            key: \"screenshot_dl\",\n            icon: \"nf nf-md-arrow_expand_all\",\n            action: () => {\n              container.takeScreenshot().then(canvas => {\n                if (canvas) {\n                  bbn.fn.downloadContent(bbn.fn.replaceAll('/', '-', container.getFullCurrentURL() + '_' + bbn.fn.dateSQL(undefined, true) + '.png'), canvas);\n                }\n              });\n            }\n          }, {\n            text: bbn._(\"Copy\"),\n            key: \"screenshot_copy\",\n            icon: \"nf nf-md-image_multiple\",\n            action: () => {\n              container.takeScreenshot(0.5).then(canvas => {\n                if (canvas) {\n                  canvas.toBlob(blob => {\n                    bbn.fn.copy(blob).then(() => {\n                      appui.success();\n                    });\n                  });\n                }\n              });\n            }\n          }, {\n            text: bbn._(\"Copy full size\"),\n            key: \"screenshot_copy\",\n            icon: \"nf nf-md-image_multiple\",\n            action: () => {\n              container.takeScreenshot(1).then(canvas => {\n                if (canvas) {\n                  canvas.toBlob(blob => {\n                    bbn.fn.copy(blob).then(() => {\n                      appui.success();\n                    });\n                  });\n                }\n              });\n            }\n          }]\n        });\n      }\n      if (!view.fixed && !view.pane) {\n        if (this.isBreadcrumb) {\n          items.push({\n            text: bbn._(\"Close\"),\n            key: \"close\",\n            icon: \"nf nf-md-close\",\n            action: () => {\n              this.close(idx);\n            }\n          });\n        } else {\n          if (!view.pinned) {\n            items.push({\n              text: bbn._(\"Pin\"),\n              key: \"pin\",\n              icon: \"nf nf-md-pin\",\n              action: () => {\n                this.pin(idx);\n              }\n            });\n            items.push({\n              text: bbn._(\"Close\"),\n              key: \"close\",\n              icon: \"nf nf-md-close\",\n              action: () => {\n                this.close(idx);\n              }\n            });\n          } else {\n            items.push({\n              text: bbn._(\"Unpin\"),\n              key: \"pin\",\n              icon: \"nf nf-md-pin_off\",\n              action: () => {\n                this.unpin(idx);\n              }\n            });\n          }\n        }\n      }\n      if (others && !view.pane) {\n        items.push({\n          text: bbn._(\"Close Others\"),\n          key: \"close_others\",\n          icon: \"nf nf-md-close_circle_outline\",\n          action: () => {\n            this.closeAllBut(idx);\n          }\n        });\n        if (!this.isVisual) {\n          let directions = [];\n          if (idx) {\n            if (idx > 1) {\n              directions.push({\n                text: bbn._(\"First\"),\n                key: \"move_first\",\n                icon: \"nf nf-md-close_circle_outline\",\n                action: () => {\n                  this.move(idx, 0);\n                }\n              });\n            }\n            directions.push({\n              text: bbn._(\"Before\"),\n              key: \"move_before\",\n              icon: \"nf nf-md-close_circle_outline\",\n              action: () => {\n                this.move(idx, idx - 1);\n              }\n            });\n          }\n          if (idx < this.views.length - 1) {\n            directions.push({\n              text: bbn._(\"After\"),\n              key: \"move_after\",\n              icon: \"nf nf-md-close_circle_outline\",\n              action: () => {\n                this.move(idx, idx + 1);\n              }\n            });\n            if (idx < this.views.length - 2) {\n              directions.push({\n                text: bbn._(\"Last\"),\n                key: \"move_last\",\n                icon: \"nf nf-md-close_circle_outline\",\n                action: () => {\n                  this.move(idx, this.views.length - 1);\n                }\n              });\n            }\n          }\n          if (directions.length) {\n            if (directions.length === 1) {\n              directions[0].text = bbn._(\"Switch position\");\n              items.push(directions[0]);\n            } else {\n              items.push({\n                text: bbn._(\"Move\"),\n                key: \"move\",\n                icon: \"nf nf-md-close_circle_outline\",\n                items: directions\n              });\n            }\n          }\n        }\n      }\n      if (container && this.splittable) {\n        if (container.isPane) {\n          items.push({\n            text: bbn._(\"Remove from pane\"),\n            key: \"unpane\",\n            icon: \"nf nf-md-window_restore\",\n            action: () => {\n              this.removeFromPane(idx);\n            }\n          });\n        } else {\n          items.push({\n            text: bbn._(\"Show in a new pane\"),\n            key: \"split\",\n            icon: \"nf nf-md-format_horizontal_align_right\",\n            action: () => {\n              this.addToPane(idx);\n            }\n          });\n          if (this.currentPanes.length) {\n            let tmp = {\n              text: bbn._(\"Show in pane\"),\n              key: \"panes\",\n              icon: \"nf nf-md-checkbox_multiple_blank_outline\",\n              items: []\n            };\n            bbn.fn.each(this.currentPanes, (a, i) => {\n              tmp.items.push({\n                text: 'Pane <div class=\"bbn-badge\">' + (i + 1) + '</div>',\n                key: \"pane\" + (i + 1),\n                action: () => {\n                  this.addToPane(idx, a.id);\n                }\n              });\n            });\n            items.push(tmp);\n          }\n        }\n      }\n      if (others && !view.fixed && !view.pane) {\n        items.push({\n          text: bbn._(\"Close All\"),\n          key: \"close_all\",\n          icon: \"nf nf-md-close_circle\",\n          action: () => {\n            this.closeAll();\n          }\n        });\n      }\n      if (this.configuration && !view.pane) {\n        items.push({\n          text: bbn._(\"Configuration\"),\n          key: \"config\",\n          icon: \"nf nf-fa-cogs\",\n          action: () => {\n            this.getPopup({\n              label: false,\n              scrollable: true,\n              closable: true,\n              component: 'bbn-router-config',\n              minWidth: 800,\n              minHeight: 500,\n              componentOptions: {\n                router: this,\n                visual: !this.parent\n              }\n            });\n          }\n        });\n      }\n      let menu = bbn.fn.isArray(this.menu) ? this.menu : this.menu(view, this);\n      if (menu.length) {\n        bbn.fn.each(menu, a => {\n          items.push(a);\n        });\n      }\n      return items;\n    }\n  }\n});\n\n//# sourceURL=webpack://@bbn/bbn-cp/./src/components/router/_mixins/menu.js?");

/***/ })

}]);